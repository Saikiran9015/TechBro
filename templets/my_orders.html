{% extends "base.html" %}

{% block title %}My Orders | KropKart{% endblock %}

{% block content %}
<div class="animate-fade">
    <div class="hero-gradient"
        style="padding: 3rem 2rem; margin-bottom: 2rem; text-align: left; background: linear-gradient(135deg, var(--primary-dark), #064e3b);">
        <h1 style="color: white; margin-bottom: 0.5rem;"><i class="fas fa-box-open"></i> My Booking History</h1>
        <p style="opacity: 0.9; font-size: 1.1rem;">Track your orders, quantities, and real-time Shiprocket delivery
            status.</p>
    </div>

    {% if orders %}
    <div class="grid-cols-auto" style="grid-template-columns: 1fr; gap: 1.5rem;">
        {% for order in orders %}
        <div class="card" style="display: grid; grid-template-columns: auto 1fr auto; gap: 2rem; align-items: center;">
            <div
                style="width: 80px; height: 80px; background: var(--gray-100); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: var(--primary);">
                <i class="fas fa-seedling"></i>
            </div>

            <div>
                <h3 style="margin-bottom: 0.25rem;">{{ order.product_name or 'Agricultural Product' }}</h3>
                <div style="display: flex; gap: 1.5rem; flex-wrap: wrap; margin-bottom: 0.5rem;">
                    <span class="text-muted"><i class="fas fa-calendar-alt"></i> {{ order.date.strftime('%d %b %Y,
                        %H:%M') }}</span>
                    <span class="text-primary font-bold"><i class="fas fa-weight-hanging"></i> Quantity: {{
                        order.quantity or 1 }} kg</span>
                    <span class="text-dark font-bold">Total: â‚¹{{ order.amount }}</span>
                </div>
                <div style="font-size: 0.9rem; color: var(--gray-600);">
                    <i class="fas fa-map-marker-alt"></i> Delivery to: {{ order.delivery_address or 'Registered Hub' }}
                </div>
            </div>

            <div style="text-align: right;">
                {% if order.shipment_id %}
                <div class="badge"
                    style="background: var(--primary); color: white; margin-bottom: 0.5rem; display: block; text-align: center;">
                    <i class="fas fa-truck"></i> Shiprocket: {{ order.shipment_id }}
                </div>
                <small class="text-primary" style="font-weight: 700;">Status: {{ order.delivery_status or 'On the way'
                    }}</small>
                {% else %}
                <div class="badge"
                    style="background: var(--secondary); color: var(--dark); margin-bottom: 0.5rem; display: block; text-align: center;">
                    <i class="fas fa-clock"></i> Manual Delivery
                </div>
                <small class="text-muted">Awaiting Pickup</small>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="card" style="text-align: center; padding: 5rem 2rem;">
        <i class="fas fa-shopping-basket fa-4x" style="color: var(--gray-200); margin-bottom: 1.5rem;"></i>
        <h2>No bookings found</h2>
        <p class="text-muted mb-6">You haven't ordered anything yet. Explore our marketplace for the best harvests!</p>
        <a href="/citizen" class="btn btn-primary">Go to Marketplace</a>
    </div>
    {% endif %}
</div>

<style>
    .card:hover {
        transform: none;
        box-shadow: var(--shadow-md);
        border-color: var(--primary-light);
    }
</style>
{% endblock %}